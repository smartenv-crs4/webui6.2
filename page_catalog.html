<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en"> <!--<![endif]-->
<head>
    <title>Catalog Page - Cagliari Port 2020</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Favicon -->
    <link rel="shortcut icon" href="favicon.ico">

    <!-- Web Fonts -->
    <link rel='stylesheet' type='text/css'
          href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic,latin'>

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- CSS Header and Footer -->
    <link rel="stylesheet" href="assets/css/headers/header-default.css">
    <link rel="stylesheet" href="assets/css/footers/footer-v1.css">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="assets/plugins/animate.css">
    <link rel="stylesheet" href="assets/plugins/line-icons/line-icons.css">
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/plugins/scrollbar/css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="assets/plugins/sky-forms-pro/skyforms/css/sky-forms.css">
    <link rel="stylesheet" href="assets/plugins/sky-forms-pro/skyforms/custom/custom-sky-forms.css">

    <!-- CSS Page Style -->
    <link rel="stylesheet" href="assets/css/pages/profile.css">

    <!-- CSS Theme -->
    <link rel="stylesheet" href="assets/css/theme-skins/dark.css" id="style_color">
    <link rel="stylesheet" href="assets/css/theme-colors/dark-red.css">

    <!-- CSS Customization -->
    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel="stylesheet" href="assets/css/custom_rfq.css">
    <style type="text/css">
        .giveMeEllipsis {
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 5; /* number of lines to show */
            /*  line-height: 1;  fallback */
            max-height: 5; /* fallback */
        }

        .sidebar-showhide {
            max-width: 25%;
            float: left;
            display: flex;
            padding: 15px;
            padding-top: 0;
        }

        .autoexpand {
            width: auto;
            display: flex;
        }

        #pagination_container {
            display: block;
            margin-right: auto;
            margin-left: auto;
            max-width: 530px;
            width: 530px;
        }
    </style>

</head>

<body>
<div class="wrapper">
    <!--=== Header ===-->
    <div id="header_p"></div>
    <!--=== End Header ===-->

    <!--=== Profile ===-->
    <div class="container content profile">
        <div class="row">
            <!--Left Sidebar-->
            <div id="sidebar" class="sidebar-showhide" style="display: none;">

            </div>
            <!--End Left Sidebar-->

            <!-- Catalog Content -->
            <div class="autoexpand">

                <div class="row">
                    <!--Alert-->
                    <div class="sm-margin-bottom-30 col-md-8">
                        <div class="panel-heading-v2 overflow-h">
                            <div class="row well">
                                <div class="col-md-4"><h2 class="heading-xs pull-left"><i
                                        class="fa fa-file fa-fw"></i> <span data-i18n="catalog.catalog"></span></h2>
                                </div>
                                <div class="col-md-8">

                                    <!--.search-block form.page-search-form .checkbox  -->
                                    <ul class="list-inline clear-both">

                                        <li class="sort-list-btn">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="">
						<span class="input-group-btn">
							<button class="btn-u" type="button"><i class="fa fa-search"></i> <span data-i18n="catalog.search"></span></button>
						</span>
                                            </div>
                                            <!--div class="btn-group row">
                                                <div class="col-md-10" style="padding-right: 0px;">
                                                    <input class="form-control margin-bottom-10" name="code"
                                                           type="text">
                                                </div>

                                                <div class="col-md-2" style="padding-left: 0px;">
                                                    <button type="button" class="btn-u "><i class="fa fa-search"></i>
                                                        <span data-i18n="catalog.search"></span></button>


                                                </div>
                                            </div-->
                                            <!--div class="row search-block">
                                                <form action="" class="sky-form page-search-form"
                                                      style="margin-left: 15px;">
                                                    <div class="inline-group">
                                                        <label class="checkbox"><input type="checkbox"
                                                                                       name="checkbox-inline"
                                                                                       checked=""><i></i><span
                                                                data-i18n="catalog.all"></span></label>
                                                        <label class="checkbox"><input type="checkbox"
                                                                                       name="checkbox-inline"><i></i><span
                                                                data-i18n="catalog.incatalog"></span></label>
                                                    </div>
                                                </form>


                                            </div-->
                                        </li>

                                    </ul>

                                </div>


                            </div>
                        </div>
                        <div id="products_container" class="table-search-v2">

                        </div>

                        <div id="pagination_container" class="center-block">

                        </div>

                    </div>
                    <!--End Alert-->
                    <div id="files_container" class="col-md-4">


                    </div>

                </div><!--/end row-->

            </div>
            <!-- End Catalog Content -->

            <!--/container-->
            <!--=== End Profile ===-->
        </div>
    </div><!--/wrapper-->
    <!--=== Footer Version 1 ===-->
    <div class="footer-v1">
        <div class="footer">
            <div class="container">
                <div class="row">
                    <!-- About -->
                    <div class="col-md-4 md-margin-bottom-40">
                        <a href="index.html"><img id="logo-footer" class="footer-logo"
                                                  src="assets/img/port/crs4.png" alt=""></a>
                        <p>Il CRS4 Ã¨ un centro di ricerca interdisciplinare privato fondato dalla Regione Autonoma
                            della Sardegna.</p>

                    </div><!--/col-md-3-->
                    <!-- End About -->

                    <!-- Link List -->
                    <div class="col-md-4 md-margin-bottom-40">
                        <div class="headline"><h2>Useful Links</h2></div>
                        <ul class="list-unstyled link-list">
                            <li><a href="#">About us</a><i class="fa fa-angle-right"></i></li>
                            <li><a href="#">Site</a><i class="fa fa-angle-right"></i></li>
                            <li><a href="#">Contact us</a><i class="fa fa-angle-right"></i></li>
                        </ul>
                    </div><!--/col-md-3-->
                    <!-- End Link List -->

                    <!-- Address -->
                    <div class="col-md-4 map-img md-margin-bottom-40">
                        <div class="headline"><h2>Contact Us</h2></div>
                        <address class="md-margin-bottom-40">
                            Edificio 1 <br/>
                            Loc. Pixina Manna <br/>
                            Pula, CA <br/>
                            Email: <a href="mailto:cport2020@gmail.com" class="">cport2020@gmail.com</a>
                        </address>
                    </div><!--/col-md-3-->
                    <!-- End Address -->
                </div>
            </div>
        </div><!--/footer-->

        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <p>
                            2015 &copy; All Rights Reserved.
                            <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
                        </p>
                    </div>

                    <!-- Social Links -->
                    <div class="col-md-6">
                        <ul class="footer-socials list-inline">
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Facebook">
                                    <i class="fa fa-facebook"></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Skype">
                                    <i class="fa fa-skype"></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Google Plus">
                                    <i class="fa fa-google-plus"></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Linkedin">
                                    <i class="fa fa-linkedin"></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Pinterest">
                                    <i class="fa fa-pinterest"></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Twitter">
                                    <i class="fa fa-twitter"></i>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="tooltips" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="Dribbble">
                                    <i class="fa fa-dribbble"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Social Links -->
                </div>
            </div>
        </div><!--/copyright-->
    </div>
    <!--=== End Footer Version 1 ===-->


    <script id="productstable" type="text/x-handlebars-template">
        <div class="panel panel-profile">
            <div class="panel-heading overflow-h">
                <h2 class="panel-title heading-sm pull-left"><i class="fa fa-shopping-bag"></i><span
                        data-i18n="catalog.products"></span></h2>

            </div>

            <div class="panel-body margin-bottom-50">
                {{#each products}}
                <div class="media media-v2">
                    <a class="pull-left" href="#">
                        <img class="media-object img-circle" src="{{images.[0]}}"
                             onError="this.onerror=null;this.src='http://news.siteintelgroup.com/blog/components/com_easyblog/themes/wireframe/images/placeholder-image.png'"
                             alt="">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">
                            <strong><a href="#">{{name}}</a></strong>
                            <small>{{#each categories}} {{/each}}</small>
                        </h4>
                        <p>
                        <div class="giveMeEllipsis blog-author-desc">{{description}}</div>
                        <a class="more" style="display:none" data-i18n="catalog.more"></a>
                        <a class="less" style="display:none" data-i18n="catalog.less"></a>
                        </p>

                        <ul class="list-inline results-list pull-left">
                            {{#each tags}}
                            <li><a href="#">{{this}}</a></li>
                            {{/each}}
                        </ul>
                        <ul class="list-inline pull-right">
                           {{#if ../isSupplier}} <li><a href="#"><i class="  fa fa-edit"></i></a></li> {{/if}}
                            <li><a href="#"><i class="expand-list rounded-x fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="expand-list rounded-x fa fa-photo"></i></a></li>
                            <li><a href="#"><i class="expand-list rounded-x fa fa-star"></i></a></li>
                        </ul>
                    </div>
                </div><!--/end media media v2-->
                {{/each}}


            </div>
        </div>

    </script>


    <script id="filetable" type="text/x-handlebars-template">
        <div class="md-margin-bottom-20">
            <div class="panel panel-profile no-bg">
                <div class="panel-heading overflow-h">
                    <h2 class="panel-title heading-sm pull-left"><i class="fa fa-file"></i><span
                            data-i18n="catalog.files"></span></h2>
                    {{#if isSupplier}}<a href="#"><i class="fa fa-upload pull-right"></i></a> {{/if}}
                </div>
                <div id="scrollbar2" class="panel-body no-padding mCustomScrollbar _mCS_3 mCS-autoHide"
                     data-mcs-theme="minimal-dark" style="position: relative; overflow: visible;">
                    <div id="mCSB_3" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical mCSB_outside" tabindex="0">
                        <div id="mCSB_3_container" class="mCSB_container"
                             style="position: relative; top: 0px; left: 0px;"
                             dir="ltr">

                            {{#each files}}
                            <div class="profile-event">
                                <div class="date-formats">
                                    <i onclick="javascript:window.open('{{../url}}{{filename}}');"
                                       class="fa fa-file-pdf-o"></i>

                                </div>

                                <div class="overflow-h">
                                    <h3 class="heading-xs"><a href="{{../url}}{{filename}}"
                                                              target="_blank">{{filename}}</a>
                                    </h3>
                                    <p data-i18n="catalog.pdf"></p>
                                    {{#if ../isSupplier}}
                                    <i class="fa fa-remove"></i>
                                    {{/if}}
                                </div>
                            </div>
                            {{/each}}
                        </div>
                    </div>
                    <div id="mCSB_3_scrollbar_vertical"
                         class="mCSB_scrollTools mCSB_3_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical"
                         style="display: block;">
                        <div class="mCSB_draggerContainer">
                            <div id="mCSB_3_dragger_vertical" class="mCSB_dragger"
                                 style="position: absolute; min-height: 50px; display: block; height: 168px; max-height: 286px; top: 0px;"
                                 oncontextmenu="return false;">
                                <div class="mCSB_dragger_bar" style="line-height: 50px;"></div>
                            </div>
                            <div class="mCSB_draggerRail"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </script>


    <script id="pagination_template" type="text/x-handlebars-template">


        <ul class="pagination">
            {{#paginate pagination type="first"}}
            {{#if disabled}}{{else}}
            <li class="hidden-xs hidden-sm"><a href="#"
                                               onclick="javascript:getproducts(getproductsURL, 'productstable', '#products_container', {{n}});"
                                               data-i18n="pagination.first"></a></li>
            {{/if}}
            {{/paginate}}
            {{#paginate pagination type="previous"}}
            {{#if disabled}}{{else}}
            <li><a href="#"
                   onclick="javascript:getproducts(getproductsURL, 'productstable', '#products_container', {{n}});">
                &lt;</a></li>
            {{/if}}
            {{/paginate}}
            {{#paginate pagination type="middle" limit="7"}}
            <li class="{{#if active}}active{{/if}} hidden-xs">
                <a href="#"
                   onclick="javascript:getproducts(getproductsURL, 'productstable', '#products_container', {{n}});">{{n}}</a>
            </li>
            {{/paginate}}
            {{#paginate pagination type="next"}}
            {{#if disabled}}{{else}}
            <li><a href="#"
                   onclick="javascript:getproducts(getproductsURL, 'productstable', '#products_container', {{n}});">
                &gt;</a></li>
            {{/if}}
            {{/paginate}}
            {{#paginate pagination type="last"}}
            {{#if disabled}}{{else}}
            <li class="hidden-xs hidden-sm"><a href="#"
                                               onclick="javascript:getproducts(getproductsURL, 'productstable', '#products_container', {{n}});"
                                               data-i18n="pagination.last"></a></li>
            {{/if}}
            {{/paginate}}
        </ul>
    </script>


    <script type="text/javascript" src="assets/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <!-- JS Implementing Plugins -->
    <script type="text/javascript" src="assets/plugins/smoothScroll.js"></script>
    <script type="text/javascript" src="assets/plugins/counter/waypoints.min.js"></script>
    <script type="text/javascript" src="assets/plugins/counter/jquery.counterup.min.js"></script>
    <script type="text/javascript" src="assets/plugins/sky-forms-pro/skyforms/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="assets/plugins/scrollbar/js/jquery.mCustomScrollbar.concat.min.js"></script>

    <!-- JS Translation -->
    <script src="assets/js/translations/translation.js"></script>
    <script type="text/javascript" src="assets/js/plugins/i18next.min.js"></script>
    <script type="text/javascript" src="assets/js/plugins/jquery-i18next.min.js"></script>

    <!-- JS Customization -->
    <script type="text/javascript" src="assets/js/sidebar.js"></script>
    <script type="text/javascript" src="assets/js/custom.js"></script>
    <!-- JS Page Level -->
    <script type="text/javascript" src="assets/js/app.js"></script>
    <script type="text/javascript" src="assets/js/plugins/datepicker.js"></script>
    <!--<script type="text/javascript" src="assets/js/plugins/style-switcher.js"></script>-->
    <script type="text/javascript" src="assets/js/common_header.js"></script>

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>

    <script type="text/javascript" src="assets/js/utils.js"></script>
    <script type="text/javascript" src="assets/js/handlebars-paginate.js"></script>


    <script type="text/javascript">

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                    results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }


        var supId = getParameterByName("idSupplier"); //"57f5059fe8094b7137fa3efd";
        var getfilesURL = _brokerMsUrl + "users/attachment/" + supId;
        var getproductsURL = _brokerMsUrl + "products?supplierId=" + supId;
        //getproductsURL = _brokerMsUrl + "products";

        function getfiles(url, templateid, target) {
            $.get(url, function (data) {
                console.log(data);
                if (!window[templateid + "_template"]) {
                    window[templateid + "_template"] = Handlebars.compile($('#' + templateid).html());
                }

                var files = [];
                for (var i = 0; i < data.files.length; ++i)
                    files.push({filename: data.files[i]})

                var compiled = window[templateid + "_template"]({
                    files: files,
                    url: _brokerMsUrl + "/users/attachment/" + supId + "/",
                    isSupplier: currentSupplier
                });

                $(target).empty();
                $(target).html(compiled);
                $(target).localize();
            });
        }

        function getproducts(url, templateid, target, page) {
            if (page) {
                if (url.indexOf("?") === -1)
                    url += "?page=" + page;
                else
                    url += "&page=" + page
            }
            $.get(url, function (data) {
                console.log(data);
                if (!window[templateid + "_template_fun"]) {
                    window[templateid + "_template_fun"] = Handlebars.compile($('#' + templateid).html());
                }


                var compiled = window[templateid + "_template_fun"]({
                    products: data.docs,
                    isSupplier: currentSupplier

                });


                $(target).empty();
                $(target).html(compiled);


                if (!window["pagination_template_fun"]) {
                    window["pagination_template_fun"] = Handlebars.compile($("#pagination_template").html());
                }

                var pagination = window["pagination_template_fun"]({
                    pagination: {
                        page: data.page,
                        pageCount: data.pages
                    }
                });

                $("#pagination_container").empty();
                if (data.pages > 1)
                    $("#pagination_container").html(pagination);
                $(target).localize();
                $("ul.pagination").localize();
                $(".giveMeEllipsis:truncated").siblings("a.more").show();
                $(".more").click(showMore);
                $(".less").click(showLess);

            });
        }

        function showMore(e) {
            var el = e.currentTarget;
            $(el).siblings(".blog-author-desc").removeClass("giveMeEllipsis");
            $(el).hide();
            $(el).siblings(".less").show();
        }

        function showLess(e) {
            var el = e.currentTarget;
            $(el).siblings(".blog-author-desc").addClass("giveMeEllipsis");
            $(el).hide();
            $(el).siblings(".more").show();
        }

        $.expr[':'].truncated = function (obj) {
            var element = $(obj);

            return (element[0].scrollHeight > (element.innerHeight() + 1)) || (element[0].scrollWidth > (element.innerWidth() + 1));
        };

    </script>

    <script type="text/javascript">
        var userType = "customer";
        var currentSupplier = false;

        jQuery(document).ready(function () {


            Handlebars.registerHelper('paginate', paginate);

            App.init();
            //App.initCounter();
            //App.initScrollBar();
            //Datepicker.initDatepicker();
            //StyleSwitcher.initStyleSwitcher();
            //   getConversations();


            var logged = false;
            if (window.sessionStorage && sessionStorage.token)
                    logged = true;
            if (logged)
                $("#sidebar").show();

            if (window.sessionStorage && sessionStorage.type)
                    userType = sessionStorage.type;

            if (userType == "supplier" && supId == window.sessionStorage.userId){
                currentSupplier = true;
            }
            getfiles(getfilesURL, "filetable", '#files_container');
            getproducts(getproductsURL, 'productstable', '#products_container');
            $("body").localize();

        });

    </script>
    <!--[if lt IE 9]>
    <script src="assets/plugins/respond.js"></script>
    <script src="assets/plugins/html5shiv.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="assets/plugins/sky-forms-pro/skyforms/js/sky-forms-ie8.js"></script>
    <![endif]-->

    <!--[if lt IE 10]>
    <script src="assets/plugins/sky-forms-pro/skyforms/js/jquery.placeholder.min.js"></script>
    <![endif]-->
</body>
</html>
